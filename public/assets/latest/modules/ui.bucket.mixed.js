(function(G,w,d){'use strict';if(!G)return;G.modules=G.modules||{};function e(s){return String(s||'').replace(/[&<>"']/g,function(c){return{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c];});}function b(){var c=(G.store&&G.store.config)||{},x=String(c.feedSummaryBase||'/feeds/posts/summary');if(x.charAt(0)!=='/')x='/'+x;return x.replace(/\/$/,'');}function u(l,m){m=Math.max(1,Math.min(20,parseInt(m,10)||8));return b()+(l?'/-/'+encodeURIComponent(l):'')+'?alt=json&orderby=published&max-results='+m;}function f(url){if(G.services&&G.services.api&&G.services.api.fetch)return G.services.api.fetch(url,'json');return w.fetch(url,{credentials:'same-origin'}).then(function(r){if(!r||!r.ok)throw 0;return r.json();});}function t(en){var mt=en&&(en['media$thumbnail']||en.media$thumbnail);if(mt&&mt.url)return String(mt.url);var h=((en&&en.content&&en.content.$t)||(en&&en.summary&&en.summary.$t)||'');var m=h.match(/<img[^>]+src=["']([^"']+)["']/i);return m&&m[1]?m[1]:'';}function c(i){var im=i.i?'<img alt="" decoding="async" loading="lazy" src="'+e(i.i)+'"/>':'';return '<a class="gg-mixed__card" href="'+e(i.u)+'"><span class="gg-mixed__thumb">'+im+'</span><span class="gg-mixed__body"><span class="gg-mixed__kicker">'+e(i.l||'Mixed')+'</span><span class="gg-mixed__headline">'+e(i.t)+'</span></span></a>';}function h(sec){if(!sec||sec.__ggm)return;sec.__ggm=1;var g=sec.querySelector('[data-gg-mixed-grid="1"]'),s=sec.querySelector('[data-gg-mixed-status="1"]');if(!g)return;var l=(sec.getAttribute('data-gg-label')||'').trim(),m=sec.getAttribute('data-gg-max')||'8';sec.setAttribute('data-gg-state','loading');if(s)s.textContent='Loadingâ€¦';f(u(l,m)).then(function(j){var a=(j&&j.feed&&j.feed.entry)||[],out=[];for(var i=0;i<a.length;i++){var x=a[i],tt=(x&&x.title&&x.title.$t)||'',ln=(x&&x.link)||[],href='#',k='';for(var n=0;n<ln.length;n++){if(ln[n].rel==='alternate'&&ln[n].href){href=ln[n].href;break;}}var ca=x&&x.category||[];for(var z=0;z<ca.length;z++){if(ca[z]&&ca[z].term){k=ca[z].term;break;}}if(tt&&href)out.push({t:tt,u:href,l:k||l,i:t(x)});}if(!out.length){if(s)s.textContent='No posts yet.';sec.removeAttribute('data-gg-state');return;}g.innerHTML=out.map(c).join('');if(s)s.textContent=out.length+' posts';sec.setAttribute('data-gg-state','loaded');}).catch(function(){if(s)s.textContent='Feed unavailable.';sec.removeAttribute('data-gg-state');});}function init(){var arr=[].slice.call(d.querySelectorAll('[data-gg-module="mixed-media"]'));if(!arr.length)return;if(!('IntersectionObserver' in w)){arr.forEach(h);return;}var io=new IntersectionObserver(function(es){for(var i=0;i<es.length;i++){if(!es[i].isIntersecting)continue;io.unobserve(es[i].target);h(es[i].target);}}, {rootMargin:'280px 0px'});arr.forEach(function(s){io.observe(s);});}G.modules.mixedMedia=G.modules.mixedMedia||{};G.modules.mixedMedia.init=G.modules.mixedMedia.init||init;if(G.boot&&G.boot.onReady)G.boot.onReady(init);else if(d.readyState==='loading')d.addEventListener('DOMContentLoaded',init,{once:true});else init();})(window.GG=window.GG||{},window,document);
